<!doctype html>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-49C0EJEDEC"></script>
<script>
   window.dataLayer = window.dataLayer || [];
   function gtag(){dataLayer.push(arguments);}
   gtag('js', new Date());
   
   gtag('config', 'G-49C0EJEDEC');
</script>
<style>
   .waiting { color: orange; }
   .completed { color: green; }
   .check{
   border-width:5px;
   border-style:solid;
   border-color:gray;
   }
   .warning{
   border-width:5px;
   border-style:solid;
   border-color:red;
   }
   .debug{
   border-width:5px;
   border-style:solid;
   border-color:purple;
   }
   .bonus{
   border-width:5px;
   border-style:solid;
   border-color:purple red green blue;
   }
</style>
<html lang="en" class="no-js">
   <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
   <script id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js"></script>
   <head>
      <meta charset="utf-8">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      <title>Chen Guoyi - CG2111A Tutorial</title>
      <meta name="description" content="Chen Guoyi's Research Website @ NUS School of Computing">
      <link rel="stylesheet" href="https://comp.nus.edu.sg/~guoyi/src/style.css">
      <script src="https://comp.nus.edu.sg/~guoyi/src/script.js"></script>
      <link href="https://comp.nus.edu.sg/~guoyi/src/prism.css" rel="stylesheet" />
   </head>
   <body>
      <header>
         <div id="logo"><a href="https://nus.edu.sg/"target="_blank"><img src="https://comp.nus.edu.sg/~guoyi/src/img/nus-logo.png" style="vertical-align:middle"></a>Guoyi's Repository</div>
         <nav>
            <ul>
               <li><a href="https://comp.nus.edu.sg/~guoyi">Home</a>
               <li><a href="https://scholar.google.com/citations?user=FMnS8mMAAAAJ" target="_blank">Google Scholar</a>
               <li><a href="https://blog.nus.edu.sg/chenguoyi/about/" target="_blank">About Guoyi</a>
            </ul>
         </nav>
      </header>
      <section>
         <strong>&#10148; <a href="https://comp.nus.edu.sg/~guoyi">comp.nus.edu.sg/~guoyi</a> / tutorial / <a href="https://comp.nus.edu.sg/~guoyi/tutorial/cg2111a">cg2111a</a> / <a href="https://comp.nus.edu.sg/~guoyi/tutorial/cg2111a/ros-topics">ros-topics</a></strong>
      </section>
      <section id="pageContent">
         <main role="main">
            <article>
               <h1>Tutorial: Robot Operating System for EPP2</h1>
               <hr>
               <p><strong>Engineering Principles and Practice II [<a href="https://nusmods.com/courses/CG2111A/engineering-principles-and-practice-ii" target="_blank">CG2111A</a>] </strong><br>
                  <br>
                  <strong>Author: </strong> Chen Guoyi<br>
                  <strong>Supervisors: </strong>Boyd Anderson; Henry Tan; Nguyen Tien Khoa; Ravi S/O Suppiah; Sean Tan Rui Xiang; Tan Keng Yan, Colin.<br><br>
                  <strong>This tutorial is sponsored by the NUS School of Computing and brought to you by the AY23/24 CG2111A Teaching Team.</strong>
               </p>
            </article>
         </main>
         <aside>
            <div>
               <center>
                  <br><br>
                  <strong>Directory: </strong><br><br>
                  <table>
                     <tbody>
                        <tr>
                           <td></td>
                           <td colspan="3"><a href="https://www.comp.nus.edu.sg/~guoyi/tutorial/cg2111a/ros">Tutorial Homepage</a></td>
                        </tr>
                        <tr>
                           <td></td>
                           <td>├</td>
                           <td>&nbsp;<a href="https://www.comp.nus.edu.sg/~guoyi/tutorial/cg2111a/ros-setup">1. Setup ROS on RPi 4</a></td>
                           <td></td>
                        </tr>
                        <tr>
                           <td>&#10148;</td>
                           <td>├</td>
                           <td>&nbsp;2. Talker & Listener</td>
                           <td></td>
                        </tr>
                        <tr>
                           <td></td>
                           <td>├</td>
                           <td>&nbsp;<a href="https://www.comp.nus.edu.sg/~guoyi/tutorial/cg2111a/ros-slam">3. RPi LiDAR & SLAM</a></td>
                           <td></td>
                        </tr>
                        <tr>
                           <td></td>
                           <td>├</td>
                           <td>&nbsp;<a href="https://www.comp.nus.edu.sg/~guoyi/tutorial/cg2111a/ros-network">4. ROS Networking</a></td>
                           <td></td>
                        </tr>
                        <tr>
                           <td></td>
                           <td>└</td>
                           <td>&nbsp;<a href="https://www.comp.nus.edu.sg/~guoyi/tutorial/cg2111a/">References</a></td>
                           <td></td>
                        </tr>
                     </tbody>
                  </table>
                  <br><br><br>
            </div>
            </center>
         </aside>
         <main_noaside role="main">
            <article>
               <center>
                  <h1>Talker & Listener (Optional)</h1>
               </center>
               <p>This tutorial serves as an additional exercise for students to learn the very fundamental and important functions (see section 0.1 Objectives) of ROS using "Talker & Listener" as example. While the CG2111A module does not require you to fully understand these methodologies, gaining knowledge in these areas can be immensely beneficial for your future modules that utilize ROS, or even in your career.</p>
               <p>It's important to note that in CG2111A, the teaching team will handle these functions for you. Therefore, if you're not interested in the details behind some commands, you may choose to skip this entire tutorial. This flexibility allows you to focus on the aspects of ROS that are most relevant and interesting to you.</p>
               <h2><strong>0. Introduction</strong></h2>
               <p>In this exercise, students will develop two nodes within the ROS framework: one node will publish a value, and another node will echo the published value. Communication between nodes in ROS is facilitated through topics, akin to channels in which messages are broadcasted and received. To understand this concept, consider the following analogy:</p>
               <center><img src="https://www.comp.nus.edu.sg/~guoyi/tutorial/cg2111a/ros-topics/img/Tom&Jerry.gif" width=20%></center>
               <ul>
                  <li>Imagine Tom and Jerry, representing two nodes in a network. Tom wishes to send information to Jerry using two different methods: email and telegram, analogous to two separate topics in ROS.</li>
                  <li>In this scenario, Tom acts as a publisher who sends information, while Jerry acts as a subscriber who receives it. For Jerry to receive the information sent via email, he must have an email account—similarly, a node must subscribe to a topic to receive messages broadcasted on that topic.</li>
                  <li>The information relayed through these topics is referred to as a message. For instance, a message could be "I saw 3 students in location 1". If the information pattern repeats with slight variations (e.g., "I saw 4 students in location 2"), the messages can be simplified to just the varying elements, like "3 and 1" followed by "4 and 2".</li>
                  <li>The structure and meaning of these messages are defined in a <code class="language-sh">.msg</code> file, a text file that describes the fields of a message, effectively outlining the data structure contained within a topic.</li>
               </ul>
               <p>In this project, your workspace should be named <code class="language-sh">cg2111a_exercise_ws</code>, and your package should be <code class="language-sh">cg2111a_talker_listener</code>.</p>
               <h2>0.1 Objectives</h2>
               <p>By the end of this project, students should be able to:</p>
               <ol>
                  <li>Create a workspace and a package.</li>
                  <li>Develop nodes and define messages.</li>
                  <li>Utilize nodes and messages to facilitate one-way communication.</li>
                  <li>Design and implement a launch file.</li>
               </ol>
               <p>For your reference, the following tree structure represents the organization of files and directories within the <code class="language-sh">cg2111a_exercise_ws</code> ROS workspace. This includes the ROS package <code class="language-sh">cg2111a_talker_listener</code>, along with its nodes, launch file, and configuration files.</p>
               <pre><code class="language-markup">cg2111a_exercise_ws/
├── build/
├── devel/
│   ├── ...
│   └── setup.bash
├── src/
│   └── cg2111a_talker_listener/
│       ├── CMakeLists.txt  (modified to include talker and listener executables)
│       ├── package.xml  (modified to include necessary dependencies)
│       ├── launch/
│       │   └── cg2111a_talker_listener.launch  (launch file for starting talker and listener nodes)
│       └── src/
│           ├── talker.cpp  (publisher node source code)
│           └── listener.cpp  (subscriber node source code)
└── (other ROS workspace directories and files)</code></pre>
               <details>
                  <summary>Click here to expand the whole file tree.</summary>
                  <pre><code class="language-markup">~/cg2111a_exercise_ws $ tree
.
├── build
│   ├── atomic_configure
│   │   ├── env.sh
│   │   ├── local_setup.bash
│   │   ├── local_setup.sh
│   │   ├── local_setup.zsh
│   │   ├── setup.bash
│   │   ├── setup.sh
│   │   ├── _setup_util.py
│   │   └── setup.zsh
│   ├── catkin
│   │   └── catkin_generated
│   │       └── version
│   │           └── package.cmake
│   ├── catkin_generated
│   │   ├── env_cached.sh
│   │   ├── generate_cached_setup.py
│   │   ├── installspace
│   │   │   ├── env.sh
│   │   │   ├── local_setup.bash
│   │   │   ├── local_setup.sh
│   │   │   ├── local_setup.zsh
│   │   │   ├── setup.bash
│   │   │   ├── setup.sh
│   │   │   ├── _setup_util.py
│   │   │   └── setup.zsh
│   │   ├── order_packages.cmake
│   │   ├── order_packages.py
│   │   ├── setup_cached.sh
│   │   └── stamps
│   │       └── Project
│   │           ├── interrogate_setup_dot_py.py.stamp
│   │           ├── order_packages.cmake.em.stamp
│   │           ├── package.xml.stamp
│   │           └── _setup_util.py.stamp
│   ├── CATKIN_IGNORE
│   ├── catkin_make.cache
│   ├── cg2111a_talker_listener
│   │   ├── catkin_generated
│   │   │   ├── cg2111a_talker_listener-msg-extras.cmake.develspace.in
│   │   │   ├── cg2111a_talker_listener-msg-extras.cmake.installspace.in
│   │   │   ├── installspace
│   │   │   │   ├── cg2111a_talker_listenerConfig.cmake
│   │   │   │   ├── cg2111a_talker_listenerConfig-version.cmake
│   │   │   │   ├── cg2111a_talker_listener-msg-extras.cmake
│   │   │   │   ├── cg2111a_talker_listener-msg-paths.cmake
│   │   │   │   └── cg2111a_talker_listener.pc
│   │   │   ├── ordered_paths.cmake
│   │   │   ├── package.cmake
│   │   │   ├── pkg.develspace.context.pc.py
│   │   │   ├── pkg.installspace.context.pc.py
│   │   │   └── stamps
│   │   │       └── cg2111a_talker_listener
│   │   │           ├── package.xml.stamp
│   │   │           ├── pkg-genmsg.cmake.em.stamp
│   │   │           └── pkg.pc.em.stamp
│   │   ├── cmake
│   │   │   ├── cg2111a_talker_listener-genmsg.cmake
│   │   │   └── cg2111a_talker_listener-genmsg-context.py
│   │   ├── CMakeFiles
│   │   │   ├── cg2111a_talker_listener_gencpp.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   └── progress.make
│   │   │   ├── cg2111a_talker_listener_generate_messages_cpp.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   ├── depend.internal
│   │   │   │   ├── depend.make
│   │   │   │   └── progress.make
│   │   │   ├── cg2111a_talker_listener_generate_messages.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   ├── depend.internal
│   │   │   │   ├── depend.make
│   │   │   │   └── progress.make
│   │   │   ├── cg2111a_talker_listener_generate_messages_eus.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   ├── depend.internal
│   │   │   │   ├── depend.make
│   │   │   │   └── progress.make
│   │   │   ├── cg2111a_talker_listener_generate_messages_lisp.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   ├── depend.internal
│   │   │   │   ├── depend.make
│   │   │   │   └── progress.make
│   │   │   ├── cg2111a_talker_listener_generate_messages_nodejs.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   ├── depend.internal
│   │   │   │   ├── depend.make
│   │   │   │   └── progress.make
│   │   │   ├── cg2111a_talker_listener_generate_messages_py.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   ├── depend.internal
│   │   │   │   ├── depend.make
│   │   │   │   └── progress.make
│   │   │   ├── cg2111a_talker_listener_geneus.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   └── progress.make
│   │   │   ├── cg2111a_talker_listener_genlisp.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   └── progress.make
│   │   │   ├── cg2111a_talker_listener_gennodejs.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   └── progress.make
│   │   │   ├── cg2111a_talker_listener_genpy.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   └── progress.make
│   │   │   ├── CMakeDirectoryInformation.cmake
│   │   │   ├── listener.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── CXX.includecache
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   ├── depend.internal
│   │   │   │   ├── depend.make
│   │   │   │   ├── flags.make
│   │   │   │   ├── link.txt
│   │   │   │   ├── progress.make
│   │   │   │   └── src
│   │   │   │       └── listener.cpp.o
│   │   │   ├── progress.marks
│   │   │   ├── roscpp_generate_messages_cpp.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   └── progress.make
│   │   │   ├── roscpp_generate_messages_eus.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   └── progress.make
│   │   │   ├── roscpp_generate_messages_lisp.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   └── progress.make
│   │   │   ├── roscpp_generate_messages_nodejs.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   └── progress.make
│   │   │   ├── roscpp_generate_messages_py.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   └── progress.make
│   │   │   ├── rosgraph_msgs_generate_messages_cpp.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   └── progress.make
│   │   │   ├── rosgraph_msgs_generate_messages_eus.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   └── progress.make
│   │   │   ├── rosgraph_msgs_generate_messages_lisp.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   └── progress.make
│   │   │   ├── rosgraph_msgs_generate_messages_nodejs.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   └── progress.make
│   │   │   ├── rosgraph_msgs_generate_messages_py.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   └── progress.make
│   │   │   ├── std_msgs_generate_messages_cpp.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   ├── depend.internal
│   │   │   │   ├── depend.make
│   │   │   │   └── progress.make
│   │   │   ├── std_msgs_generate_messages_eus.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   ├── depend.internal
│   │   │   │   ├── depend.make
│   │   │   │   └── progress.make
│   │   │   ├── std_msgs_generate_messages_lisp.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   ├── depend.internal
│   │   │   │   ├── depend.make
│   │   │   │   └── progress.make
│   │   │   ├── std_msgs_generate_messages_nodejs.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   ├── depend.internal
│   │   │   │   ├── depend.make
│   │   │   │   └── progress.make
│   │   │   ├── std_msgs_generate_messages_py.dir
│   │   │   │   ├── build.make
│   │   │   │   ├── cmake_clean.cmake
│   │   │   │   ├── DependInfo.cmake
│   │   │   │   ├── depend.internal
│   │   │   │   ├── depend.make
│   │   │   │   └── progress.make
│   │   │   └── talker.dir
│   │   │       ├── build.make
│   │   │       ├── cmake_clean.cmake
│   │   │       ├── CXX.includecache
│   │   │       ├── DependInfo.cmake
│   │   │       ├── depend.internal
│   │   │       ├── depend.make
│   │   │       ├── flags.make
│   │   │       ├── link.txt
│   │   │       ├── progress.make
│   │   │       └── src
│   │   │           └── talker.cpp.o
│   │   ├── cmake_install.cmake
│   │   ├── CTestTestfile.cmake
│   │   └── Makefile
│   ├── CMakeCache.txt
│   ├── CMakeFiles
│   │   ├── 3.16.3
│   │   │   ├── CMakeCCompiler.cmake
│   │   │   ├── CMakeCXXCompiler.cmake
│   │   │   ├── CMakeDetermineCompilerABI_C.bin
│   │   │   ├── CMakeDetermineCompilerABI_CXX.bin
│   │   │   ├── CMakeSystem.cmake
│   │   │   ├── CompilerIdC
│   │   │   │   ├── a.out
│   │   │   │   ├── CMakeCCompilerId.c
│   │   │   │   └── tmp
│   │   │   └── CompilerIdCXX
│   │   │       ├── a.out
│   │   │       ├── CMakeCXXCompilerId.cpp
│   │   │       └── tmp
│   │   ├── clean_test_results.dir
│   │   │   ├── build.make
│   │   │   ├── cmake_clean.cmake
│   │   │   ├── DependInfo.cmake
│   │   │   └── progress.make
│   │   ├── cmake.check_cache
│   │   ├── CMakeDirectoryInformation.cmake
│   │   ├── CMakeError.log
│   │   ├── CMakeOutput.log
│   │   ├── CMakeRuleHashes.txt
│   │   ├── CMakeTmp
│   │   ├── download_extra_data.dir
│   │   │   ├── build.make
│   │   │   ├── cmake_clean.cmake
│   │   │   ├── DependInfo.cmake
│   │   │   └── progress.make
│   │   ├── doxygen.dir
│   │   │   ├── build.make
│   │   │   ├── cmake_clean.cmake
│   │   │   ├── DependInfo.cmake
│   │   │   └── progress.make
│   │   ├── Makefile2
│   │   ├── Makefile.cmake
│   │   ├── progress.marks
│   │   ├── run_tests.dir
│   │   │   ├── build.make
│   │   │   ├── cmake_clean.cmake
│   │   │   ├── DependInfo.cmake
│   │   │   └── progress.make
│   │   ├── TargetDirectories.txt
│   │   └── tests.dir
│   │       ├── build.make
│   │       ├── cmake_clean.cmake
│   │       ├── DependInfo.cmake
│   │       └── progress.make
│   ├── cmake_install.cmake
│   ├── CTestConfiguration.ini
│   ├── CTestCustom.cmake
│   ├── CTestTestfile.cmake
│   ├── gtest
│   │   ├── CMakeFiles
│   │   │   ├── CMakeDirectoryInformation.cmake
│   │   │   └── progress.marks
│   │   ├── cmake_install.cmake
│   │   ├── CTestTestfile.cmake
│   │   ├── googlemock
│   │   │   ├── CMakeFiles
│   │   │   │   ├── CMakeDirectoryInformation.cmake
│   │   │   │   ├── gmock.dir
│   │   │   │   │   ├── build.make
│   │   │   │   │   ├── cmake_clean.cmake
│   │   │   │   │   ├── DependInfo.cmake
│   │   │   │   │   ├── depend.make
│   │   │   │   │   ├── flags.make
│   │   │   │   │   ├── link.txt
│   │   │   │   │   ├── progress.make
│   │   │   │   │   └── src
│   │   │   │   ├── gmock_main.dir
│   │   │   │   │   ├── build.make
│   │   │   │   │   ├── cmake_clean.cmake
│   │   │   │   │   ├── DependInfo.cmake
│   │   │   │   │   ├── depend.make
│   │   │   │   │   ├── flags.make
│   │   │   │   │   ├── link.txt
│   │   │   │   │   ├── progress.make
│   │   │   │   │   └── src
│   │   │   │   └── progress.marks
│   │   │   ├── cmake_install.cmake
│   │   │   ├── CTestTestfile.cmake
│   │   │   ├── gtest
│   │   │   │   ├── CMakeFiles
│   │   │   │   │   ├── CMakeDirectoryInformation.cmake
│   │   │   │   │   ├── gtest.dir
│   │   │   │   │   │   ├── build.make
│   │   │   │   │   │   ├── cmake_clean.cmake
│   │   │   │   │   │   ├── DependInfo.cmake
│   │   │   │   │   │   ├── depend.make
│   │   │   │   │   │   ├── flags.make
│   │   │   │   │   │   ├── link.txt
│   │   │   │   │   │   ├── progress.make
│   │   │   │   │   │   └── src
│   │   │   │   │   ├── gtest_main.dir
│   │   │   │   │   │   ├── build.make
│   │   │   │   │   │   ├── cmake_clean.cmake
│   │   │   │   │   │   ├── DependInfo.cmake
│   │   │   │   │   │   ├── depend.make
│   │   │   │   │   │   ├── flags.make
│   │   │   │   │   │   ├── link.txt
│   │   │   │   │   │   ├── progress.make
│   │   │   │   │   │   └── src
│   │   │   │   │   └── progress.marks
│   │   │   │   ├── cmake_install.cmake
│   │   │   │   ├── CTestTestfile.cmake
│   │   │   │   └── Makefile
│   │   │   └── Makefile
│   │   ├── lib
│   │   └── Makefile
│   ├── Makefile
│   └── test_results
├── devel
│   ├── cmake.lock
│   ├── env.sh
│   ├── lib
│   │   ├── cg2111a_talker_listener
│   │   │   ├── listener
│   │   │   └── talker
│   │   ├── pkgconfig
│   │   │   └── cg2111a_talker_listener.pc
│   │   └── python3
│   │       └── dist-packages
│   │           └── cg2111a_talker_listener
│   │               └── __init__.py
│   ├── local_setup.bash
│   ├── local_setup.sh
│   ├── local_setup.zsh
│   ├── setup.bash
│   ├── setup.sh
│   ├── _setup_util.py
│   ├── setup.zsh
│   └── share
│       ├── cg2111a_talker_listener
│       │   └── cmake
│       │       ├── cg2111a_talker_listenerConfig.cmake
│       │       ├── cg2111a_talker_listenerConfig-version.cmake
│       │       ├── cg2111a_talker_listener-msg-extras.cmake
│       │       └── cg2111a_talker_listener-msg-paths.cmake
│       └── roseus
│           └── ros
│               └── cg2111a_talker_listener
│                   └── manifest.l
└── src
    ├── cg2111a_talker_listener
    │   ├── CMakeLists.txt
    │   ├── include
    │   │   └── cg2111a_talker_listener
    │   ├── package.xml
    │   └── src
    │       ├── listener.cpp
    │       └── talker.cpp
    └── CMakeLists.txt -> /opt/ros/noetic/share/catkin/cmake/toplevel.cmake

92 directories, 305 files
</code></pre>
               </details>
               <p>This structure outlines the key components of the ROS workspace:</p>
               <ul>
                  <li><strong>build/</strong>: Contains intermediate files generated during the build process.</li>
                  <li><strong>devel/</strong>: Includes executables, libraries, and the <code class="language-sh">setup.bash</code> script for environment setup.</li>
                  <li>
                     <strong>src/</strong>: The source directory for ROS packages. For this tutorial, it houses the <code class="language-sh">cg2111a_talker_listener</code> package, which includes:
                     <ul>
                        <li><strong>CMakeLists.txt</strong>: Lists build instructions for the package's nodes.</li>
                        <li><strong>package.xml</strong>: Defines the package's dependencies and metadata.</li>
                        <li><strong>launch/</strong>: Contains ROS launch files for starting nodes.</li>
                        <li><strong>src/</strong>: Source code for the publisher (<code class="language-sh">talker.cpp</code>) and subscriber (<code class="language-sh">listener.cpp</code>) nodes.</li>
                     </ul>
                  </li>
               </ul>
               <p>This hierarchical view helps in understanding the organization and the relationships between different components of the ROS workspace.</p>
               <div class="check">
                  <strong style="color:white; background-color:gray;">Before we start!&nbsp;</strong>
                  <p>Please check if you successfully implemented the ROS Noetic on your Raspberry Pi or on your Ubuntu 20.04 PC. If not, please navigate to <a href="https://www.comp.nus.edu.sg/~guoyi/tutorial/cg2111a/ros-setup">Tutorial 1:  Setup ROS on RPi 4</a> to set up the ROS Noetic environment.</p>
                  <input type="checkbox" class="task-checkbox" id="task0"><label for="task0" class="status waiting">Waiting Complete</label>
                  </p>
               </div>
               <br>
               <h2><strong>1. Steps for ROS Workspace and Package Creation</strong></h2>
               <ol>
                  <li>
                     <strong>Create a workspace and build it.</strong>
                     <p>If you have not already created a workspace called <code class="language-sh">cg2111a_exercise_ws</code>, create one and build it using the following commands:</p>
                     <pre><code class="language-sh">cd ~
mkdir cg2111a_exercise_ws
cd cg2111a_exercise_ws
mkdir src
cd ~/cg2111a_exercise_ws
catkin_make</code></pre>
                     <p>This step sets up a ROS workspace, which is a directory where you can develop ROS projects. The <code class="language-sh">catkin_make</code> command is used to build the workspace, compiling any source files and preparing the environment for ROS nodes.</p>
                  </li>
                  <div class="check">
                     <strong style="color:white; background-color:gray;">Check Your Work Now&nbsp;</strong>
                     <p>Please check, your terminal looks like this:</p>
                     <center><img src="https://www.comp.nus.edu.sg/~guoyi/tutorial/cg2111a/ros-topics/img/1.png" width=60%></center>
                     <p>and you received: <code class="language-sh">Build files have been written to: /home/pi/cg2111a_exercise_ws/build</code> at last.<br>
                        <input type="checkbox" class="task-checkbox" id="task1"><label for="task1" class="status waiting">Waiting Complete</label>
                     </p>
                  </div>
                  <br>
                  <li>
                     <strong>Create a package.</strong>
                     <p>Inside <code class="language-sh">~/cg2111a_exercise_ws/src</code>, create a package called <code class="language-sh">cg2111a_talker_listener</code> using the command:</p>
                     <pre><code class="language-sh">cd ~/cg2111a_exercise_ws/src
catkin_create_pkg cg2111a_talker_listener std_msgs roscpp</code></pre>
                     <p>This command creates a new ROS package with the specified name and dependencies. The package will include two important files, <code class="language-sh">CMakeLists.txt</code> and <code class="language-sh">package.xml</code>, which are used for building the package and specifying its metadata, respectively.</p>
                  </li>
                  <div class="check">
                     <strong style="color:white; background-color:gray;">Check Your Work Now&nbsp;</strong>
                     <p>Please check, your terminal looks like this:</p>
                     <center><img src="https://www.comp.nus.edu.sg/~guoyi/tutorial/cg2111a/ros-topics/img/2.png" width=60%></center>
                     <p>and you received: <code class="language-sh">Successfully created files in /home/pi/cg2111a_exercise_ws/src/cg2111a_talker_listener. Please adjust the values in package.xml.</code> at last.<br>
                        <input type="checkbox" class="task-checkbox" id="task2"><label for="task2" class="status waiting">Waiting Complete</label>
                     </p>
                  </div>
                  <br>
                  <li>
                     <strong>Build the workspace and source the setup file.</strong>
                     <p>Like in Step 1, build the workspace as follows:</p>
                     <pre><code class="language-sh">cd ~/cg2111a_exercise_ws
catkin_make</code></pre>
                     <p>Then, source the setup file:</p>
                     <pre><code class="language-sh">source ./devel/setup.bash</code></pre>
                     <p>Building the workspace compiles all packages within it, including the newly created package. Sourcing the setup file updates your environment to include paths to the workspace's binaries and scripts, making ROS nodes and tools from this workspace available for use.</p>
                  </li>
                  <div class="check">
                     <strong style="color:white; background-color:gray;">Check Your Work Now&nbsp;</strong>
                     <p>Please check, your terminal looks like this:</p>
                     <center><img src="https://www.comp.nus.edu.sg/~guoyi/tutorial/cg2111a/ros-topics/img/3.png" width=60%></center>
                     <p>and you received: <code class="language-sh">Build files have been written to: /home/pi/cg2111a_exercise_ws/build</code> at last.<br>
                        <input type="checkbox" class="task-checkbox" id="task3"><label for="task3" class="status waiting">Waiting Complete</label>
                     </p>
                  </div>
                  <br>
                  <li>
                     <strong>Check the first-order dependencies.</strong>
                     <p>Before we check the dependencies, we need to install a Python library <code class="language-sh">rosdep</code>:</p>
                     <pre><code class="language-sh">sudo pip3 install -U rosdep</code></pre>
                     <p>Check the first-order dependencies of the package using the command:</p>
                     <pre><code class="language-sh">rospack depends1 cg2111a_talker_listener</code></pre>
                     <p>This command lists the direct dependencies of the specified package, reflecting the dependencies declared when the package was created. Understanding these dependencies is crucial for ensuring your package has access to the necessary ROS libraries and messages for its operation.</p>
                  </li>
                  <div class="check">
                     <strong style="color:white; background-color:gray;">Check Your Work Now&nbsp;</strong>
                     <p>Please check, your terminal's results are:</p>
                     <pre><code class="language-sh">roscpp
std_msgs</code></pre>
                     <input type="checkbox" class="task-checkbox" id="task4"><label for="task4" class="status waiting">Waiting Complete</label>
                     </p>
                  </div>
                  <br>
               </ol>
               <p>The result of checking the dependencies should align with the specified dependencies when creating the package. This ensures that your package can interact with ROS correctly and utilize necessary message types and functionalities.</p>
               <ol start="5">
                  <li>
                     <strong>Create a new node <code class="language-sh">talker.cpp</code>, which will be a publisher.</strong>
                     <p>Inside <code class="language-sh">~/cg2111a_exercise_ws/src/cg2111a_talker_listener/src</code>, create and open a file <code class="language-sh">talker.cpp</code> using the following commands:</p>
                     <pre><code class="language-sh">cd ~/cg2111a_exercise_ws/src/cg2111a_talker_listener/src
touch talker.cpp
nano talker.cpp</code></pre>
                     <p>Write the following code into <code class="language-sh">talker.cpp</code>:</p>
                     <pre><code class="language-cpp">#include "ros/ros.h"
#include "std_msgs/String.h"
#include &lt;sstream&gt;
/**
* This tutorial demonstrates simple sending of messages over the ROS system.
*/
int main(int argc, char **argv)
{
  ros::init(argc, argv, "talker");
  ros::NodeHandle n;
  ros::Publisher chatter_pub = n.advertise&lt;std_msgs::String&gt;("chatter", 1000);
  ros::Rate loop_rate(10);
  int count = 0;
  while (ros::ok())
  {
    std_msgs::String msg;
    std::stringstream ss;
    ss &lt;&lt; "I met student number " &lt;&lt; count;
    msg.data = ss.str();
    ROS_INFO("%s", msg.data.c_str());
    chatter_pub.publish(msg);
    ros::spinOnce();
    loop_rate.sleep();
    ++count;
  }
}</code></pre>
                     <p>Save the file. This code snippet creates a ROS node that publishes a sequence of messages, each containing a string with a counter value. It demonstrates how to send messages within the ROS system and can be used to understand the publishing mechanism.</p>
                  </li>
                  <li>
                     <strong>Create a new node <code class="language-sh">listener.cpp</code>, which will be a subscriber.</strong>
                     <p>Inside <code class="language-sh">~/cg2111a_exercise_ws/src/cg2111a_talker_listener/src</code>, create and open a file <code class="language-sh">listener.cpp</code> using the same method as before:</p>
                     <pre><code class="language-sh">touch listener.cpp
nano listener.cpp</code></pre>
                     <p>For the <code class="language-sh">listener.cpp</code>, you'll need to write a corresponding subscriber code that listens to the messages published by <code class="language-sh">talker.cpp</code>. The detailed code for this will involve setting up a subscriber to the "chatter" topic and defining a callback function to process incoming messages.</p>
                     <p>Write the following code into <code class="language-sh">listener.cpp</code>:</p>
                     <pre><code class="language-cpp">#include "ros/ros.h"
#include "std_msgs/String.h"
/**
* This tutorial demonstrates simple receipt of messages over the ROS system.
*/
void chatterCallback(const std_msgs::String::ConstPtr&amp; msg)
{
  ROS_INFO("I heard: [%s]", msg-&gt;data.c_str());
}

int main(int argc, char **argv)
{
  ros::init(argc, argv, "listener");
  ros::NodeHandle n;
  ros::Subscriber sub = n.subscribe("chatter", 1000, chatterCallback);
  ros::spin();
  return 0;
}</code></pre>
                     <p>Save the file. This code sets up a ROS node that subscribes to the "chatter" topic and prints the messages it receives, illustrating how to receive and process messages within the ROS system.</p>
                  </li>
               </ol>
               <ol start="7">
                  <li>
                     <strong>Modify <code class="language-sh">CMakeLists.txt</code>.</strong>
                     <p>Next, open the <code class="language-sh">CMakeLists.txt</code> inside <code class="language-sh">~/cg2111a_exercise_ws/src/cg2111a_talker_listener</code>:
                     <pre><code class="language-sh">cd ~/cg2111a_exercise_ws/src/cg2111a_talker_listener
nano CMakeLists.txt</code></pre>
                     and modify it as detailed below to include the new nodes and their dependencies:</p>
                     <pre><code class="language-markup">cmake_minimum_required(VERSION 3.0.2)
project(cg2111a_talker_listener)
find_package(catkin REQUIRED COMPONENTS
  roscpp
  std_msgs
  message_generation
  genmsg
)
generate_messages(
  DEPENDENCIES
  std_msgs
)
catkin_package(
  CATKIN_DEPENDS roscpp std_msgs message_runtime
)
include_directories(
  include
  ${catkin_INCLUDE_DIRS}
)
add_executable(talker src/talker.cpp)
target_link_libraries(talker ${catkin_LIBRARIES})
add_dependencies(talker cg2111a_talker_listener_generate_messages_cpp)
add_executable(listener src/listener.cpp)
target_link_libraries(listener ${catkin_LIBRARIES})
add_dependencies(listener cg2111a_talker_listener_generate_messages_cpp)</code></pre>
                     <p>Save the file. These modifications specify the dependencies of your project, ensuring that ROS knows how to correctly build and link the talker and listener nodes within your package.</p>
                  </li>
               </ol>
               <ol start="8">
                  <li>
                     <strong>Modify <code class="language-sh">package.xml</code>.</strong>
                     <p>Open the <code class="language-sh">package.xml</code> file inside <code class="language-sh">~/cg2111a_exercise_ws/src/cg2111a_talker_listener</code>:
                     <pre><code class="language-sh">cd ~/cg2111a_exercise_ws/src/cg2111a_talker_listener
nano package.xml</code></pre>
                     and include the following dependencies:</p>
                     <pre><code class="language-xml">&lt;?xml version="1.0"?&gt;
&lt;package format="2"&gt;
  &lt;name&gt;cg2111a_talker_listener&lt;/name&gt;
  &lt;version&gt;0.0.0&lt;/version&gt;
  &lt;description&gt;The cg2111a_talker_listener package&lt;/description&gt;
  &lt;maintainer email="your_email@example.com"&gt;Your Name&lt;/maintainer&gt;
  &lt;license&gt;TODO&lt;/license&gt;
  &lt;buildtool_depend&gt;catkin&lt;/buildtool_depend&gt;
  &lt;build_depend&gt;roscpp&lt;/build_depend&gt;
  &lt;build_depend&gt;std_msgs&lt;/build_depend&gt;
  &lt;build_depend&gt;message_generation&lt;/build_depend&gt;
  &lt;build_export_depend&gt;roscpp&lt;/build_export_depend&gt;
  &lt;build_export_depend&gt;std_msgs&lt;/build_export_depend&gt;
  &lt;exec_depend&gt;roscpp&lt;/exec_depend&gt;
  &lt;exec_depend&gt;std_msgs&lt;/exec_depend&gt;
  &lt;exec_depend&gt;message_runtime&lt;/exec_depend&gt;
&lt;/package&gt;</code></pre>
                     <p>Save the file. This update includes essential dependencies for building and executing your ROS package, ensuring the package manager recognizes the necessary components for compilation and runtime.</p>
                  </li>
                  <li>
                     <strong>Build the workspace and source it.</strong>
                     <p>Refer back to Step 3 for the commands, which are:</p>
                     <pre><code class="language-sh">cd ~/cg2111a_exercise_ws
catkin_make</code></pre>
                     <p>This process compiles all the packages within the workspace, including any changes made, and updates the environment to recognize the newly built executables.</p>
                  </li>
                  <div class="check">
                     <strong style="color:white; background-color:gray;">Check Your Work Now&nbsp;</strong>
                     <p>Please check, your terminal looks like this:</p>
                     <center><img src="https://www.comp.nus.edu.sg/~guoyi/tutorial/cg2111a/ros-topics/img/9.png" width=60%></center>
                     <p>and you received: <code class="language-sh">[100%] Built target listener</code> at last.<br>
                        <input type="checkbox" class="task-checkbox" id="task5"><label for="task5" class="status waiting">Waiting Complete</label>
                     </p>
                  </div>
                  <br>
                  <li>
                     <strong>Running the Publisher (Talker) and Subscriber (Listener).</strong>
                     <p>To simulate the talker and listener communicating, follow these steps:</p>
                     <ol>
                        <li>Open one terminal and navigate to your workspace: <code class="language-sh">cd ~/cg2111a_exercise_ws</code>.</li>
                        <li>Run <code class="language-sh">source ./devel/setup.bash</code> and <code class="language-sh">roscore</code>. This starts the ROS master node.</li>
                        <li>In a new terminal, navigate to workspace: <code class="language-sh">cd ~/cg2111a_exercise_ws</code> and source the setup file with <code class="language-sh">source ./devel/setup.bash</code>. Run the talker node with <code class="language-sh">rosrun cg2111a_talker_listener talker</code>.</li>
                        <li>In a new terminal, navigate to workspace: <code class="language-sh">cd ~/cg2111a_exercise_ws</code> and source the setup file with <code class="language-sh">source ./devel/setup.bash</code>. Run the talker node with <code class="language-sh">rosrun cg2111a_talker_listener listener</code>.</li>
                     </ol>
                     <p>You should see the terminal running the talker node publishing a series of messages, and the terminal running the listener node echoing those messages:</p>
                     <center><img src="https://www.comp.nus.edu.sg/~guoyi/tutorial/cg2111a/ros-topics/img/topics_demo.gif" width=60%></center>
                     <p>Experiment by stopping the listener node (using Ctrl+C) while keeping the talker node running, and observe the behavior. Similarly, stop the talker node while keeping the listener running, and note any differences.</p>
                  </li>
               </ol>
               <ol start="11">
                  <li>
                     <strong>Create a launch file. (Optional)</strong>
                     <p>Creating a launch file simplifies the process of starting multiple nodes by using a single command, <code class="language-sh">roslaunch</code>. Follow these steps to create a launch file:</p>
                     <pre><code class="language-sh">mkdir -p ~/cg2111a_exercise_ws/src/cg2111a_talker_listener/launch
touch ~/cg2111a_exercise_ws/src/cg2111a_talker_listener/launch/cg2111a_talker_listener.launch
subl ~/cg2111a_exercise_ws/src/cg2111a_talker_listener/launch/cg2111a_talker_listener.launch</code></pre>
                     <p>Insert the following XML content into the <code class="language-sh">cg2111a_talker_listener.launch</code> file:</p>
                     <pre><code class="language-xml">&lt;?xml version="1.0"?&gt;
&lt;launch&gt;
  &lt;node pkg="cg2111a_talker_listener" type="talker" name="talker" output="screen" launch-prefix="gnome-terminal --" /&gt;
  &lt;node pkg="cg2111a_talker_listener" type="listener" name="listener" output="screen" launch-prefix="gnome-terminal --" /&gt;
&lt;/launch&gt;</code></pre>
                     <p>This file defines a launch configuration that starts both the talker and listener nodes in separate terminals, facilitating easier management of the ROS nodes.</p>
                  </li>
                  <li>
                     <strong>Build the workspace and source it. (Optional)</strong>
                     <p>As done previously, rebuild the workspace and source the setup file to apply the changes:</p>
                     <pre><code class="language-sh">cd ~/cg2111a_exercise_ws
catkin_make
source ./devel/setup.bash</code></pre>
                  </li>
                  <li>
                     <strong>Launch the file. (Optional)</strong>
                     <p>In <code class="language-sh">~/cg2111a_exercise_ws</code>, launch the nodes using the following command:</p>
                     <pre><code class="language-sh">roslaunch cg2111a_talker_listener cg2111a_talker_listener.launch</code></pre>
                     <p>This command starts the ROS nodes as defined in the launch file, displaying the talker and listener nodes' outputs in separate terminals. You should observe the same behavior as when manually running the nodes in separate terminals, but with the convenience of a single command.</p>
                  </li>
               </ol>
               <center>
                  <h1>· End of Tutorial · </h1>
               </center>
               <hr>
               <div class="bonus">
                  <strong style="color:black; background-color:yellow;">★ Bonus Time!&nbsp;</strong>
                  <center>
                     <h1><font color = "green">You have done <span id="completedCount">0</span> out of 6!</font></h1>
                  </center>
                  <p>Hip hip hooray! You have successfully learned how to:</p>
                  <ol>
                     <li>Create a workspace and a package.</li>
                     <li>Develop nodes and define messages.</li>
                     <li>Utilize nodes and messages to facilitate one-way communication.</li>
                     <li>Design and implement a launch file.</li>
                  </ol>
                  <p>You are now have a better understanding of what we do in ROS. Wish you all the best for the final run of the CG2111A!</p>
                  <br>
               </div>
               <hr>
               <h2> References:</h2>
               <ul>
                  <li> Dr. Andi Sudjana Putra, Prof. Prahlad Vadakkepat; EE3305/ME3243, AY22/23 Semester I;
               </ul>
            </article>
            <center>
               <strong>
                  <p><a href="https://www.comp.nus.edu.sg/~guoyi/tutorial/cg2111a/ros-setup">&lt; Prev</a> &nbsp;Tutorial 1: Setup ROS on Raspberry Pi 4 &nbsp;&nbsp; | &nbsp;&nbsp; Tutorial 3: Raspberry Pi LiDAR & SLAM &nbsp;<a href="https://www.comp.nus.edu.sg/~guoyi/tutorial/cg2111a/ros-slam">Next &gt;</a></p>
               </strong>
            </center>
         </main_noaside>
      </section>
      <footer>
         <p>	&copy; 2004-2024 Chen <a id="footer_a" href="mailto:guoyi@comp.nus.edu.sg">Guoyi@comp.nus.edu.sg</a>
         </p>
      </footer>
      <script>
         document.addEventListener('DOMContentLoaded', function() {
             const checkboxes = document.querySelectorAll('.task-checkbox');
         
             checkboxes.forEach(function(checkbox) {
                 const label = checkbox.nextElementSibling; // 获取复选框旁边的label
                 checkbox.addEventListener('change', function() {
                     if (this.checked) {
                         label.textContent = 'Marked as completed';
                         label.classList.remove('waiting');
                         label.classList.add('completed');
                     } else {
                         label.textContent = 'Waiting Complete';
                         label.classList.remove('completed');
                         label.classList.add('waiting');
                     }
                     updateCompletedCount();
                 });
             });
         
             function updateCompletedCount() {
                 const completedCount = document.querySelectorAll('.task-checkbox:checked').length;
                 document.getElementById('completedCount').textContent = completedCount;
             }
         });
      </script>
      <script src="https://comp.nus.edu.sg/~guoyi/src/prism.js"></script>
   </body>
</html>